<!doctype html>
<html>
  <head>
    <title>D3 - Lesson 3</title>
    
    <script src="assets/d3.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/style.css">
    <script src="data/people.js"></script>

  </head>
  <body>
    
    <h1>Lesson 3: Better Binding &amp; Scales</h1>

    <div id="viz">
    </div>
    <a href='#' class='show-wisdom'>Show wisdom</a>
    <a href='#' class='show-awesomeness'>Show awesomeness</a>
      
    <script>
      // Don't change any of this
      var height = 400;
      var width = 500;
      var svg = d3.select('#viz').append('svg')
                                    .attr('height', height)
                                    .attr('width', width)
      
      var data = window.data;
      // Note, we've loaded this data in from the data/people.js file
      // `data` is a list of people that look like:
      // [{
      //   "name": "Leonor Laidlaw",
      //   "age": 54,
      //   "awesomeness": 0.54,
      //   "wisdom": 0.20
      // }, ... ]
      //
      // Age is between 0 and 100
      // awesomeness and wisdom are between 0 and 1
    

      // In this lesson we will plot our people on a graph
      // 
      // awesomeness or wisdom
      // ^
      // |  o     o
      // |    o
      // | o
      // +----------------> age


      // Step 1 ///////////////////////////////////////
      // Let's make some scales for the axes
      var xScale = d3.scale.linear();
      var yScale = d3.scale.linear();

      // TODO: set the domain and range for our scales
      // so that our graph is drawn on a 500px across by 400px up/down grid
      //
      // Remember!
      //  - domain is the input (age/awesomeness/wisdom) range
      //  - range is the output (pixel) range 
      //  - both domain() and range() take an array

      xScale.domain([0, 100]).range([0, width])
      yScale.domain([0, 1]).range([0, height])



      // Step 2 ///////////////////////////////////////
      // As a setup we'll just add all our people to the
      // diagram, but give them no attributes yet
      var people = svg.selectAll('circle')
                        .data(data)
      people.enter().append('circle')
                      

      // TODO: Fill in the showWisdom function
      // For each person, update their circle to have a radius of 5,
      // and set their x and y position
      //
      // Use the xScale and yScale scales to plot their
      // age on an "x axis" and wisdom on a y axis appropriately
      // Vertical pixel distance will be drawn from the top, not the bottom
      // Animate their entrance over 1 second

      function showWisdom() {
        var people = svg.selectAll('circle')
                           .data(data)
      
        people.transition().duration(1000)
                .attr('cx', function(p) { return xScale(p.age) })
                .attr('cy', function(p) { return height - yScale(p.wisdom) })
                .attr('r', 10)
      }

      
      // Step 2 ///////////////////////////////////////

      // TODO: Fill in the showAwesomeness function
      // As Step 1 but drawing awesomeness on the y this time
      
      function showAwesomeness() {
        var people = svg.selectAll('circle')
                           .data(data)
      
        people.transition().duration(1000)
                .attr('cx', function(p) { return xScale(p.age) })
                .attr('cy', function(p) { return height - yScale(p.awesomeness) })
                .attr('r', 10)
      }

      
      // Step 3 //////////////////////////////////////
      // TODO: Have our showWisdom function run when
      // we click on the "show wisdom" link
           
      d3.select('a.show-awesomeness').on('click', showAwesomeness)
      d3.select('a.show-wisdom').on('click', showWisdom)



    </script>
    <script>
      //Don't delete this
      showWisdom();
    </script>
  </body>
</html>
